<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Droneblocks Go2 Navigation Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='dbdash_dashboard.css') }}">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-container">
                <img src="{{ url_for('static', filename='images/DB_logo_400px_100px.jpg') }}" alt="DroneBlocks Logo" id="db-logo">
            </div>
            <h1>Go2 Navigation Dashboard</h1>
        </div>
    </header>

    <main>
        <div class="control-panel">
            <div class="toggle-container">
                <label class="switch">
                    <input type="checkbox" id="testingModeToggle">
                    <span class="slider round"></span>
                </label>
                <span>Testing Mode</span>
            </div>
            <button id="execute-path-btn" disabled>Execute Path</button>
            <div class="estop-container">
                <span>E-Stop</span>
                <div id="estop-status" class="estop-inactive"></div>
            </div>
        </div>

        <div id="status-indicator"></div>

        <div class="dashboard-grid">
            <div class="chart">
                <h2>Height Map</h2>
                <div id="height-map"></div>
            </div>
            <div class="chart">
                <h2>LiDAR Point Cloud</h2>
                <div id="point-cloud"></div>
            </div>
            <div id="sportmode-state" class="chart">
                <h2>Robot State</h2>
                <div class="state-grid">
                    <div>
                        <h3>Velocity</h3>
                        <p>X: <span id="velocity-x" class="value">-</span> m/s</p>
                        <p>Y: <span id="velocity-y" class="value">-</span> m/s</p>
                        <p>Yaw: <span id="yaw-speed" class="value">-</span> rad/s</p>
                    </div>
                    <div>
                        <h3>Position</h3>
                        <p>X: <span id="position-x" class="value">-</span> m</p>
                        <p>Y: <span id="position-y" class="value">-</span> m</p>
                        <p>Yaw: <span id="yaw-angle" class="value">-</span> rad</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="log-console"></div>
    </main>

    <script src="{{ url_for('static', filename='dbdash_dashboard.js') }}"></script>
</body>
</html>